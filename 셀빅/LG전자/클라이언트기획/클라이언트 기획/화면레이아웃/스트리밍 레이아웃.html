<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>스트리밍 레이아웃</title>
  <style>
    html,body{height:100%;margin:0;padding:0;box-sizing:border-box;background:#141414}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;overflow-x:hidden}
    
    /* Overlay */
    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 1500;
        display: none;
    }
    .overlay.show { display: block; }

    /* Floating hamburger */
    .hamburger-btn {
        position: fixed; 
        top: 60px; 
        left: 50px;
        width: 48px; 
        height: 48px;
        border-radius: 8px;
        background: #e50914; 
        color: #fff; 
        border: none;
        display: inline-flex; 
        align-items: center; 
        justify-content: center;
        font-size: 24px; 
        cursor: pointer; 
        z-index: 2100;
        box-shadow: 0 4px 12px rgba(0,0,0,0.25);
        transition: all 0.3s ease;
    }
    .hamburger-btn:hover {
        background: #ff0a16;
        transform: scale(1.05);
    }

    /* Sidebar */
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      width: 420px;
      height: 100vh;
      background: #1a1a1a;
      border-right: 1px solid #2a2a2a;
      padding: 18px;
      z-index: 2000;
      overflow-y: auto;
      transform: translateX(-100%);
      transition: transform 0.28s ease;
      will-change: transform;
      box-sizing: border-box;
    }

    .sidebar.open {
      transform: translateX(0);
      box-shadow: 2px 0 16px rgba(0,0,0,0.3);
    }

    .sidebar::-webkit-scrollbar {
      width: 6px;
    }

    .sidebar::-webkit-scrollbar-track {
      background: #1a1a1a;
    }

    .sidebar::-webkit-scrollbar-thumb {
      background: #2a2a2a;
      border-radius: 3px;
    }

    .sidebar-header {
        margin-bottom: 20px;
    }

    .sidebar-header .logo {
        font-size: 24px;
        font-weight: 700;
        color: #fff;
        letter-spacing: 0.5px;
    }

    /* Sidebar bottom action bar styles */
    .sidebar-actions { 
        position: sticky; 
        bottom: 0; 
        background: linear-gradient(180deg, rgba(26,26,26,0), #131313); 
        padding-top: 10px; 
        margin-top: 12px; 
    }
    .sidebar-actions .actions-inner { 
        display:flex; 
        gap:10px; 
        padding:12px; 
    }
    .sidebar-actions .btn { 
        padding:12px 18px; 
        font-size:15px; 
        border-radius:10px; 
        cursor: pointer;
        transition: all 0.3s;
    }
    .sidebar-actions .btn.ghost { 
        background:#2a2a2a; 
        border:1px solid #3a3a3a; 
        color:#e0e0e0; 
    }
    .sidebar-actions .btn.primary { 
        background: linear-gradient(135deg,#e50914 0%, #ff6b6b 100%); 
        border: none;
        color:#fff; 
        box-shadow: 0 6px 18px rgba(229,9,20,0.28); 
    }
    .sidebar-actions .btn.primary:hover { 
        transform: translateY(-2px); 
    }
    .sidebar-actions .btn.full { 
        flex:1; 
    }

    /* Setting list and cards */
    .setting-list { 
        padding:0 12px 18px 12px; 
    }

    .setting-card {
        margin-bottom: 20px;
    }

    /* Environment hierarchical layout */
    .env-row { 
        background:#121212; 
        border:1px solid #242424; 
        border-radius:10px; 
        padding:14px 12px; 
        margin-bottom:14px; 
        width:100%; 
        box-sizing:border-box; 
    }
    
    .env-title { 
        font-weight:900; 
        color:#ffffff; 
        margin-bottom:10px; 
        font-size:20px; 
        letter-spacing:0.2px; 
        display:flex; 
        align-items:center; 
        gap:18px; 
    }
    
    .env-item { 
        display:flex; 
        flex-direction:column; 
        gap:6px; 
        padding:8px 10px; 
        border-radius:8px; 
        background:transparent; 
        margin-bottom:10px; 
        margin-left:6px; 
        border-left:3px solid rgba(255,255,255,0.03); 
    }
    
    .env-icon { 
        width:18px; 
        height:18px; 
        border-radius:4px; 
        background:#3a3a3a; 
        display:inline-block; 
        flex:0 0 18px; 
    }
    
    .env-label { 
        font-size:15px; 
        color:#e6e6e6; 
        font-weight:800; 
    }
    
    .env-current { 
        font-size:12px; 
        color:#bdbdbd; 
        margin-top:4px; 
    }
    
    .env-value { 
        color:#e50914; 
        font-weight:900; 
        font-size:13px; 
    }

    /* Button group for options */
    .env-button-group {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 8px;
    }

    .env-option-btn {
        padding: 8px 16px;
        background: #2a2a2a;
        border: 1px solid #3a3a3a;
        border-radius: 8px;
        color: #e0e0e0;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
    }

    .env-option-btn:hover {
        background: #3a3a3a;
        border-color: #e50914;
        color: #fff;
    }

    .env-option-btn.active {
        background: linear-gradient(135deg, #e50914 0%, #ff6b6b 100%);
        border-color: #e50914;
        color: #fff;
        box-shadow: 0 4px 12px rgba(229, 9, 20, 0.3);
    }

    .input {
        font-size:13px; 
        padding:6px 8px;
        width:100%;
        background: #2a2a2a;
        border: 1px solid #3a3a3a;
        border-radius: 8px;
        color: #ffffff;
        transition: all 0.3s;
        box-sizing: border-box;
    }

    .input:focus {
        outline: none;
        border-color: #e50914;
        background: #333333;
    }

    /* Video player styles */
    .video-container {
      width: 100%;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    video{
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    /* Player Container */
    .player-container{
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #000;
    }
    .player{
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    video{
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
  </style>
</head>
<body>
  <!-- Hamburger Button -->
  <button id="hamburgerBtn" class="hamburger-btn" aria-controls="sidebar" aria-expanded="false" aria-label="메뉴 열기">☰</button>

  <!-- Overlay -->
  <div id="overlay" class="overlay" aria-hidden="true"></div>

  <!-- Sidebar (off-canvas) - Test Settings panel -->
  <div class="sidebar" id="sidebar" role="dialog" aria-modal="true" aria-hidden="true">
    <main style="padding-top:110px;">
      <section class="setting-list" style="padding:0 6px 16px 6px;">
        <!-- Environment -->
        <div class="setting-card">
          <div class="setting-items" id="sbEnvItems">
            <!-- 외부 데이터 -->
            <div class="env-row">
              <div class="env-title"><span class="env-icon" style="background:#e50914"></span>외부 데이터</div>

              <!-- 시간대/조도 -->
              <div class="env-item">
                <div style="display:flex;align-items:center;gap:8px;">
                  <span class="env-icon" aria-hidden="true"></span>
                  <div style="flex:1;">
                    <div class="env-label">시간대/조도</div>
                    <div class="env-current">현재 적용값: <span class="env-value" data-value="time">선택 안함</span></div>
                  </div>
                </div>
                <div class="env-button-group">
                  <button class="env-option-btn" data-category="time" data-value="sunrise">일출</button>
                  <button class="env-option-btn" data-category="time" data-value="day">낮</button>
                  <button class="env-option-btn" data-category="time" data-value="sunset">일몰</button>
                  <button class="env-option-btn" data-category="time" data-value="night">밤</button>
                </div>
              </div>

              <!-- 날씨 -->
              <div class="env-item">
                <div style="display:flex;align-items:center;gap:8px;">
                  <span class="env-icon" aria-hidden="true"></span>
                  <div style="flex:1;">
                    <div class="env-label">날씨</div>
                    <div class="env-current">현재 적용값: <span class="env-value" data-value="weather">선택 안함</span></div>
                  </div>
                </div>
                <div class="env-button-group">
                  <button class="env-option-btn" data-category="weather" data-value="sunny">맑음</button>
                  <button class="env-option-btn" data-category="weather" data-value="cloudy">흐림</button>
                  <button class="env-option-btn" data-category="weather" data-value="rainy">비</button>
                  <button class="env-option-btn" data-category="weather" data-value="snowy">눈</button>
                </div>
              </div>

              <!-- 기념일 -->
              <div class="env-item">
                <div style="display:flex;align-items:center;gap:8px;">
                  <span class="env-icon" aria-hidden="true"></span>
                  <div style="flex:1;">
                    <div class="env-label">기념일</div>
                    <div class="env-current">현재 적용값: <span class="env-value" data-value="holiday">선택 안함</span></div>
                  </div>
                </div>
                <div class="env-button-group">
                  <button class="env-option-btn" data-category="holiday" data-value="weekday">평일</button>
                  <button class="env-option-btn" data-category="holiday" data-value="birthday">생일</button>
                  <button class="env-option-btn" data-category="holiday" data-value="lunar_new_year">설날</button>
                  <button class="env-option-btn" data-category="holiday" data-value="chuseok">추석</button>
                  <button class="env-option-btn" data-category="holiday" data-value="halloween">할로윈</button>
                  <button class="env-option-btn" data-category="holiday" data-value="christmas">크리스마스</button>
                </div>
              </div>

              <!-- 습도 -->
              <div class="env-item">
                <div style="display:flex;align-items:center;gap:8px;">
                  <span class="env-icon" aria-hidden="true"></span>
                  <div style="flex:1;">
                    <div class="env-label">습도</div>
                    <div class="env-current">현재 적용값: <span class="env-value" data-value="humidity">선택 안함</span></div>
                  </div>
                </div>
                <div class="env-button-group">
                  <button class="env-option-btn" data-category="humidity" data-value="dry">건조</button>
                  <button class="env-option-btn" data-category="humidity" data-value="moderate">적절</button>
                  <button class="env-option-btn" data-category="humidity" data-value="humid">습윤</button>
                </div>
              </div>

            </div>
          </div>
        </div>
      </section>

      <!-- Bottom action bar -->
      <div class="sidebar-actions">
        <div class="actions-inner">
          <button class="btn ghost full" id="sbReset">초기화</button>
          <button class="btn primary full" id="sbSave">저장</button>
        </div>
      </div>
    </main>
  </div>

  <!-- Player Container -->
  <div class="player-container" id="playerContainer">
    <div class="player">
      <video controls autoplay loop muted>
        <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
        브라우저가 video 태그를 지원하지 않습니다.
      </video>
    </div>
  </div>

  <script>
    // Hamburger + Overlay toggle
    const hamburgerBtn = document.getElementById('hamburgerBtn');
    const sidebarEl = document.querySelector('.sidebar[role="dialog"]');
    const overlayEl = document.getElementById('overlay');
    
    function toggleSidebar() {
        const sidebar = document.querySelector('.sidebar[role="dialog"]');
        if (!sidebar) return;
        const isOpen = sidebar.classList.contains('open');
        sidebar.classList.toggle('open');
        
        // Toggle overlay
        overlayEl.classList.toggle('show', !isOpen);
        
        // Update hamburger button
        hamburgerBtn.classList.toggle('active', !isOpen);
        hamburgerBtn.textContent = !isOpen ? '←' : '☰';
        hamburgerBtn.setAttribute('aria-expanded', String(!isOpen));
    }

    // Toggle clicks
    hamburgerBtn?.addEventListener('click', toggleSidebar);
    overlayEl?.addEventListener('click', toggleSidebar);

    // Close sidebar with Escape key
    window.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            const sidebar = document.querySelector('.sidebar[role="dialog"]');
            if (sidebar && sidebar.classList.contains('open')) {
                toggleSidebar();
            }
        }
    });

    // 외부 데이터 버튼 클릭 이벤트
    document.querySelectorAll('.env-option-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const category = this.getAttribute('data-category');
            const value = this.getAttribute('data-value');
            
            // 같은 카테고리 내의 다른 버튼들에서 active 제거
            document.querySelectorAll(`.env-option-btn[data-category="${category}"]`).forEach(b => {
                b.classList.remove('active');
            });
            
            // 클릭한 버튼에 active 추가
            this.classList.add('active');
            
            console.log(`선택됨 - 카테고리: ${category}, 값: ${value}`);
        });
    });

    // 초기화 버튼
    const sbResetBtn = document.getElementById('sbReset');
    sbResetBtn?.addEventListener('click', function() {
        // 모든 버튼에서 active 제거
        document.querySelectorAll('.env-option-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        console.log('테스트 세팅 초기화됨');
    });

    // 저장 버튼
    const sbSaveBtn = document.getElementById('sbSave');
    sbSaveBtn?.addEventListener('click', function() {
        const selectedSettings = {};
        
        // 각 카테고리별로 선택된 값 수집
        ['time', 'weather', 'holiday', 'humidity'].forEach(category => {
            const activeBtn = document.querySelector(`.env-option-btn[data-category="${category}"].active`);
            if (activeBtn) {
                selectedSettings[category] = activeBtn.getAttribute('data-value');
            }
        });
        
        console.log('저장된 세팅:', selectedSettings);
        alert('테스트 세팅이 저장되었습니다!');
    });
  </script>
</body>
</html>