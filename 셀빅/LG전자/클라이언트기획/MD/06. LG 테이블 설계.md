# LG AI 영상 생성 서비스 - 핵심 테이블 설계

## 📋 개요
본 문서는 LG AI 영상 생성 웹 서비스의 핵심 테이블(콘텐츠, 테마, External_Param)을 정의합니다.

---

## 📊 테이블 목록
1. **contents** - 콘텐츠 정보 (10개)
2. **themes** - 테마 정보
3. **external_params** - External_Param 정의 (4개)

---

## 📊 테이블 상세 설계

### 1. contents (콘텐츠)

#### 📌 테이블 구조

| 순번 | 컬럼명 | 데이터 타입 | 제약조건 | 기본값 | 설명 |
|:----:|:------|:-----------|:--------|:------|:-----|
| 1 | content_id | INT | PK, AUTO_INCREMENT | - | 콘텐츠 고유 번호 (자동생성) |
| 2 | content_code | VARCHAR(50) | UNIQUE, NOT NULL | - | 콘텐츠 영문 코드 (meditation, visual_art 등) |
| 3 | content_name | VARCHAR(100) | NOT NULL | - | 콘텐츠 한글 이름 |
| 4 | description | TEXT | - | NULL | 콘텐츠 상세 설명 |
| 5 | icon | VARCHAR(10) | - | NULL | 아이콘 (emoji) |
| 6 | estimated_time | VARCHAR(20) | - | NULL | 예상 소요 시간 |
| 7 | clip_count | INT | - | 1 | 기본 클립 개수 |
| 8 | requires_file_upload | BOOLEAN | - | FALSE | 파일 업로드 필요 여부 |
| 9 | file_types | JSON | - | NULL | 허용 파일 타입 배열 |
| 10 | display_order | INT | - | 0 | 화면 표시 순서 (낮을수록 우선) |
| 11 | is_active | BOOLEAN | - | TRUE | 활성화 상태 (TRUE=사용, FALSE=비활성) |
| 12 | created_at | TIMESTAMP | - | NOW() | 등록 일시 |
| 13 | updated_at | TIMESTAMP | - | NULL | 수정 일시 |

**인덱스**
- `PRIMARY KEY` (content_id)
- `UNIQUE INDEX idx_content_code` (content_code)
- `INDEX idx_display_order` (display_order)
- `INDEX idx_is_active` (is_active)

---

#### 📊 데이터 목록 (10개 콘텐츠)

| content_id | content_code | content_name | description | icon | estimated_time | clip_count | requires_file | file_types | display_order | is_active |
|:----------:|:-------------|:-------------|:------------|:----:|:--------------:|:----------:|:-------------:|:-----------|:-------------:|:---------:|
| 1 | meditation | 명상 | 휴식을 취하면서 감상할 수 있는 힐링 콘텐츠 | 🧘 | 5-10분 | 1 | FALSE | NULL | 1 | TRUE |
| 2 | visual_art | 비주얼아트 | 운동, 공부 등 특정 테마에 맞춘 음악과 영상의 조화 | 🎨 | 15-20분 | 16 | FALSE | NULL | 2 | TRUE |
| 3 | pet | 애완동물 | 동물을 위한 콘텐츠 | 🐕 | 10-15분 | 2 | FALSE | NULL | 3 | TRUE |
| 4 | clock | 시계 | 선택한 숫자 폰트와 테마로 시각화한 시계 | ⏰ | 5분 | 1 | FALSE | NULL | 4 | TRUE |
| 5 | avatar | 아바타 | 인물 사진 기반 캐릭터 행동 콘텐츠 | 👤 | 20-30분 | 1 | TRUE | ["image/jpeg", "image/png"] | 5 | TRUE |
| 6 | interior | 인테리어 | 실내를 색다르게 변경한 콘텐츠 | 🏠 | 15-20분 | 1 | FALSE | NULL | 6 | TRUE |
| 7 | memorial_album | 기념앨범 | 단체 사진 기반 기념 콘텐츠 | 📸 | 20-30분 | 1 | TRUE | ["image/jpeg", "image/png"] | 7 | TRUE |
| 8 | music | 음악감상 | 사운드 파일 기반 뮤직 비디오 | 🎵 | 25-35분 | 6 | TRUE | ["audio/mpeg", "audio/mp3"] | 8 | TRUE |
| 9 | weather | 날씨 | 날씨와 계절 정보 시각화 콘텐츠 | ☀️ | 10-15분 | 8 | FALSE | NULL | 9 | TRUE |
| 10 | plant | 식물키우기 | 습도에 따른 식물 상태 관리 | 🌱 | 10-15분 | 3 | FALSE | NULL | 10 | TRUE |

---

#### 💾 SQL INSERT 예시

```sql
-- 콘텐츠 데이터 삽입
INSERT INTO contents (content_code, content_name, description, icon, estimated_time, clip_count, requires_file_upload, file_types, display_order, is_active) VALUES
('meditation', '명상', '휴식을 취하면서 감상할 수 있는 힐링 콘텐츠', '🧘', '5-10분', 1, FALSE, NULL, 1, TRUE),
('visual_art', '비주얼아트', '운동, 공부 등 특정 테마에 맞춘 음악과 영상의 조화', '🎨', '15-20분', 16, FALSE, NULL, 2, TRUE),
('pet', '애완동물', '동물을 위한 콘텐츠', '🐕', '10-15분', 2, FALSE, NULL, 3, TRUE),
('clock', '시계', '선택한 숫자 폰트와 테마로 시각화한 시계', '⏰', '5분', 1, FALSE, NULL, 4, TRUE),
('avatar', '아바타', '인물 사진 기반 캐릭터 행동 콘텐츠', '👤', '20-30분', 1, TRUE, '["image/jpeg", "image/png"]', 5, TRUE),
('interior', '인테리어', '실내를 색다르게 변경한 콘텐츠', '🏠', '15-20분', 1, FALSE, NULL, 6, TRUE),
('memorial_album', '기념앨범', '단체 사진 기반 기념 콘텐츠', '📸', '20-30분', 1, TRUE, '["image/jpeg", "image/png"]', 7, TRUE),
('music', '음악감상', '사운드 파일 기반 뮤직 비디오', '🎵', '25-35분', 6, TRUE, '["audio/mpeg", "audio/mp3"]', 8, TRUE),
('weather', '날씨', '날씨와 계절 정보 시각화 콘텐츠', '☀️', '10-15분', 8, FALSE, NULL, 9, TRUE),
('plant', '식물키우기', '습도에 따른 식물 상태 관리', '🌱', '10-15분', 3, FALSE, NULL, 10, TRUE);
```

---

### 2. themes (테마)

#### 📌 테이블 구조

| 순번 | 컬럼명 | 데이터 타입 | 제약조건 | 기본값 | 설명 |
|:----:|:------|:-----------|:--------|:------|:-----|
| 1 | theme_id | INT | PK, AUTO_INCREMENT | - | 테마 고유 번호 (자동생성) |
| 2 | theme_code | VARCHAR(50) | UNIQUE, NOT NULL | - | 테마 영문 코드 (exercise, study 등) |
| 3 | theme_name | VARCHAR(100) | NOT NULL | - | 테마 한글 이름 |
| 4 | content_code | VARCHAR(50) | FK → contents(content_code) | NULL | 연결된 콘텐츠 코드 |
| 5 | description | TEXT | - | NULL | 테마 상세 설명 |
| 6 | display_order | INT | - | 0 | 화면 표시 순서 |
| 7 | is_active | BOOLEAN | - | TRUE | 활성화 상태 |
| 8 | created_at | TIMESTAMP | - | NOW() | 등록 일시 |

**인덱스**
- `PRIMARY KEY` (theme_id)
- `UNIQUE INDEX idx_theme_code` (theme_code)
- `INDEX idx_content_code` (content_code)
- `INDEX idx_display_order` (display_order)

---

#### 📊 데이터 목록

**1) 비주얼아트 테마 (7개)**

| theme_id | theme_code | theme_name | content_code | description | display_order | is_active |
|:--------:|:-----------|:-----------|:-------------|:------------|:-------------:|:---------:|
| 1 | exercise | 운동 | visual_art | 에너지 넘치고 활기찬 분위기 | 1 | TRUE |
| 2 | study | 공부 | visual_art | 집중력 향상에 도움되는 차분한 분위기 | 2 | TRUE |
| 3 | yoga | 요가 | visual_art | 마음을 안정시키고 이완시키는 편안한 분위기 | 3 | TRUE |
| 4 | walk | 산책 | visual_art | 자연과 함께하는 상쾌하고 평화로운 분위기 | 4 | TRUE |
| 5 | travel | 여행 | visual_art | 새로운 장소와 문화 탐험의 설레는 분위기 | 5 | TRUE |
| 6 | reading | 독서 | visual_art | 조용하고 아늑한 분위기 | 6 | TRUE |
| 7 | driving | 드라이브 | visual_art | 자유롭고 개방된 느낌 | 7 | TRUE |

**2) 애완동물 테마 (4개)**

| theme_id | theme_code | theme_name | content_code | description | display_order | is_active |
|:--------:|:-----------|:-----------|:-------------|:------------|:-------------:|:---------:|
| 8 | dog | 강아지 | pet | 활발하고 귀여운 행동 | 1 | TRUE |
| 9 | cat | 고양이 | pet | 우아하고 신비로운 행동 | 2 | TRUE |
| 10 | rabbit | 토끼 | pet | 귀엽고 사랑스러운 행동 | 3 | TRUE |
| 11 | hamster | 햄스터 | pet | 작고 앙증맞은 행동 | 4 | TRUE |

**3) 시계 테마 (5개)**

| theme_id | theme_code | theme_name | content_code | description | display_order | is_active |
|:--------:|:-----------|:-----------|:-------------|:------------|:-------------:|:---------:|
| 12 | nature_clock | 자연 | clock | 자연 테마 시계 | 1 | TRUE |
| 13 | city_clock | 도시 | clock | 도시 테마 시계 | 2 | TRUE |
| 14 | space_clock | 우주 | clock | 우주 테마 시계 | 3 | TRUE |
| 15 | minimal_clock | 미니멀 | clock | 미니멀 테마 시계 | 4 | TRUE |
| 16 | vintage_clock | 빈티지 | clock | 빈티지 테마 시계 | 5 | TRUE |

---

#### 💾 SQL INSERT 예시

```sql
-- 비주얼아트 테마
INSERT INTO themes (theme_code, theme_name, content_code, description, display_order, is_active) VALUES
('exercise', '운동', 'visual_art', '에너지 넘치고 활기찬 분위기', 1, TRUE),
('study', '공부', 'visual_art', '집중력 향상에 도움되는 차분한 분위기', 2, TRUE),
('yoga', '요가', 'visual_art', '마음을 안정시키고 이완시키는 편안한 분위기', 3, TRUE),
('walk', '산책', 'visual_art', '자연과 함께하는 상쾌하고 평화로운 분위기', 4, TRUE),
('travel', '여행', 'visual_art', '새로운 장소와 문화 탐험의 설레는 분위기', 5, TRUE),
('reading', '독서', 'visual_art', '조용하고 아늑한 분위기', 6, TRUE),
('driving', '드라이브', 'visual_art', '자유롭고 개방된 느낌', 7, TRUE);

-- 애완동물 테마
INSERT INTO themes (theme_code, theme_name, content_code, description, display_order, is_active) VALUES
('dog', '강아지', 'pet', '활발하고 귀여운 행동', 1, TRUE),
('cat', '고양이', 'pet', '우아하고 신비로운 행동', 2, TRUE),
('rabbit', '토끼', 'pet', '귀엽고 사랑스러운 행동', 3, TRUE),
('hamster', '햄스터', 'pet', '작고 앙증맞은 행동', 4, TRUE);

-- 시계 테마
INSERT INTO themes (theme_code, theme_name, content_code, description, display_order, is_active) VALUES
('nature_clock', '자연', 'clock', '자연 테마 시계', 1, TRUE),
('city_clock', '도시', 'clock', '도시 테마 시계', 2, TRUE),
('space_clock', '우주', 'clock', '우주 테마 시계', 3, TRUE),
('minimal_clock', '미니멀', 'clock', '미니멀 테마 시계', 4, TRUE),
('vintage_clock', '빈티지', 'clock', '빈티지 테마 시계', 5, TRUE);
```

---
### 3. external_params (External_Param)

#### 📌 테이블 구조

| 순번 | 컬럼명 | 데이터 타입 | 제약조건 | 기본값 | 설명 |
|:----:|:------|:-----------|:--------|:------|:-----|
| 1 | param_id | INT | PK, AUTO_INCREMENT | - | External_Param 고유 번호 (자동생성) |
| 2 | param_code | VARCHAR(50) | UNIQUE, NOT NULL | - | External_Param 영문 코드 (time_brightness, weather 등) |
| 3 | param_name | VARCHAR(100) | NOT NULL | - | External_Param 한글 이름 |
| 4 | param_type | ENUM('enum', 'range', 'boolean') | NOT NULL | - | 파라미터 타입 |
| 5 | possible_values | JSON | - | NULL | 가능한 값 배열 (enum 타입일 경우) |
| 6 | value_labels | JSON | - | NULL | 값별 한글 라벨 (예: {"sunny":"맑음"}) |
| 7 | **default_value** | **VARCHAR(50)** | - | **NULL** | **기본값 (센서 오류 시 사용)** |
| 8 | auto_detect | BOOLEAN | - | FALSE | 자동 감지 여부 |
| 9 | data_source | VARCHAR(100) | - | NULL | 데이터 소스 (system_time, iot_sensor, api) |
| 10 | description | TEXT | - | NULL | External_Param 상세 설명 |
| 11 | display_order | INT | - | 0 | 화면 표시 순서 |
| 12 | is_active | BOOLEAN | - | TRUE | 활성화 상태 |
| 13 | created_at | TIMESTAMP | - | NOW() | 등록 일시 |

**인덱스**
- `PRIMARY KEY` (param_id)
- `UNIQUE INDEX idx_param_code` (param_code)
- `INDEX idx_display_order` (display_order)

---

#### 📊 데이터 목록 (4개 External_Param)

| param_id | param_code | param_name | param_type | possible_values | value_labels | **default_value** | auto_detect | data_source | description | display_order | is_active |
|:--------:|:-----------|:-----------|:-----------|:----------------|:-------------|:---------------:|:-----------:|:------------|:------------|:-------------:|:---------:|
| 1 | time_brightness | 시간대/조도 | enum | ["sunrise","day","sunset","night"] | {"sunrise":"일출","day":"낮","sunset":"일몰","night":"밤"} | **"day"** | TRUE | system_time | 시간대별 조도 변화 | 1 | TRUE |
| 2 | weather | 날씨 | enum | ["sunny","cloudy","rainy","snowy"] | {"sunny":"맑음","cloudy":"흐림","rainy":"비","snowy":"눈"} | **"sunny"** | TRUE | weather_api | 현재 날씨 상태 | 2 | TRUE |
| 3 | holiday | 기념일 | enum | ["weekday","birthday","lunar_new_year","chuseok","halloween","christmas"] | {"weekday":"평일","birthday":"생일","lunar_new_year":"설날","chuseok":"추석","halloween":"할로윈","christmas":"크리스마스"} | **"weekday"** | TRUE | calendar_api | 특별한 날짜 및 기념일 | 3 | TRUE |
| 4 | humidity | 습도 | enum | ["dry","moderate","humid"] | {"dry":"건조","moderate":"적절","humid":"습윤"} | **"moderate"** | TRUE | iot_sensor | 실내 습도 수준 | 4 | TRUE |

---

#### 🔍 값 상세 설명

**1) 시간대/조도 (time_brightness)** - 기본값: **day (낮)**
| 값 코드 | 한글명 | 설명 | 기본값 여부 |
|:-------:|:------|:-----|:----------:|
| sunrise | 일출 | 해가 뜨는 시간대 (밝아지는 시기) | |
| **day** | **낮** | **해가 떠 있는 시간대 (밝은 시기)** | **✅ 기본** |
| sunset | 일몰 | 해가 지는 시간대 (어두워지는 시기) | |
| night | 밤 | 해가 진 후 시간대 (어두운 시기) | |

**2) 날씨 (weather)** - 기본값: **sunny (맑음)**
| 값 코드 | 한글명 | 설명 | 기본값 여부 |
|:-------:|:------|:-----|:----------:|
| **sunny** | **맑음** | **맑은 날씨** | **✅ 기본** |
| cloudy | 흐림 | 구름 낀 날씨 | |
| rainy | 비 | 비가 오는 날씨 | |
| snowy | 눈 | 눈이 오는 날씨 | |

**3) 기념일 (holiday)** - 기본값: **weekday (평일)**
| 값 코드 | 한글명 | 설명 | 기본값 여부 |
|:-------:|:------|:-----|:----------:|
| **weekday** | **평일** | **일반 평일** | **✅ 기본** |
| birthday | 생일 | 생일 기념일 | |
| lunar_new_year | 설날 | 음력 설날 | |
| chuseok | 추석 | 음력 추석 | |
| halloween | 할로윈 | 할로윈 데이 | |
| christmas | 크리스마스 | 크리스마스 | |

**4) 습도 (humidity)** - 기본값: **moderate (적절)**
| 값 코드 | 한글명 | 설명 | 기본값 여부 |
|:-------:|:------|:-----|:----------:|
| dry | 건조 | 습도가 낮은 상태 (건조함) | |
| **moderate** | **적절** | **적절한 습도 상태** | **✅ 기본** |
| humid | 습윤 | 습도가 높은 상태 (습함) | |

---

#### 💡 기본값 사용 시나리오
- **센서 오류 시**: IoT 센서 연결 실패 또는 데이터 수신 불가
- **API 오류 시**: 날씨/달력 API 응답 없음 또는 타임아웃
- **초기 재생 시**: 센서 데이터 수집 전 임시 재생
- **테스트 환경**: 센서 없는 개발/테스트 환경에서 기본 클립 재생

---

#### 💾 SQL INSERT 예시

```sql
-- External_Param 데이터 삽입
INSERT INTO external_params (param_code, param_name, param_type, possible_values, value_labels, default_value, auto_detect, data_source, description, display_order, is_active) VALUES
('time_brightness', '시간대/조도', 'enum', '["sunrise", "day", "sunset", "night"]', '{"sunrise":"일출", "day":"낮", "sunset":"일몰", "night":"밤"}', 'day', TRUE, 'system_time', '시간대별 조도 변화', 1, TRUE),
('weather', '날씨', 'enum', '["sunny", "cloudy", "rainy", "snowy"]', '{"sunny":"맑음", "cloudy":"흐림", "rainy":"비", "snowy":"눈"}', 'sunny', TRUE, 'weather_api', '현재 날씨 상태', 2, TRUE),
('holiday', '기념일', 'enum', '["weekday", "birthday", "lunar_new_year", "chuseok", "halloween", "christmas"]', '{"weekday":"평일", "birthday":"생일", "lunar_new_year":"설날", "chuseok":"추석", "halloween":"할로윈", "christmas":"크리스마스"}', 'weekday', TRUE, 'calendar_api', '특별한 날짜 및 기념일', 3, TRUE),
('humidity', '습도', 'enum', '["dry", "moderate", "humid"]', '{"dry":"건조", "moderate":"적절", "humid":"습윤"}', 'moderate', TRUE, 'iot_sensor', '실내 습도 수준', 4, TRUE);
```

---

#### 📈 콘텐츠별 External_Param 활용 예시

| 콘텐츠 | 사용 External_Param | 클립 개수 계산 |
|:------|:-------------------|:-------------|
| 명상 | time_brightness(4) × humidity(3) | 12개 |
| 비주얼아트 | time_brightness(4) × weather(4) | 16개 |
| 날씨 | weather(4) × time_brightness(4) | 16개 |
| 식물키우기 | humidity(3) | 3개 |
| 기념일 콘텐츠 | holiday(6) | 6개 |
| 기타 | 없음 | 1개 |

---

*이 테이블 설계는 LG AI 영상 생성 서비스의 핵심 데이터를 관리하며, 실제 구현 시 요구사항에 따라 조정될 수 있습니다.*

